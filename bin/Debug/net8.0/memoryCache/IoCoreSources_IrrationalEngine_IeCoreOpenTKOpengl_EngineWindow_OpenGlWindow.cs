{"embedding":[-0.016148876,-0.0012843035,0.000714434,0.012190748,-0.018590784,-0.039827075,-0.024912892,-0.015523111,0.011688889,0.05389458,-0.034510717,0.0043539437,0.03247893,-0.0348519,0.031327303,0.023564165,-0.06086705,-0.057273395,-0.08359124,0.026118169,0.01125476,0.06106911,-0.04746496,-0.07392467,-0.042189255,0.025725834,-0.009639098,-0.018052973,0.03746175,0.02707594,0.007957771,-0.026433552,-0.006546585,-0.027407868,0.0062487274,0.004182642,0.03177884,-0.00032458507,-0.008698845,-0.008935742,0.04731191,-0.033446554,-0.0066163037,-0.04497175,-0.013230621,-0.08503848,-0.022795098,-0.019263785,0.039832506,-0.048173442,0.00090738357,0.015899438,-0.0589582,-0.018012954,-0.042447835,0.0019346838,-0.015066736,0.011735875,-0.024169017,0.03337896,0.043648247,0.020769477,-0.013304174,-0.06900525,0.057228032,0.06670044,0.00985398,-0.030063216,0.014074289,-0.0010191014,-0.037977573,0.046636526,0.010750844,-0.014722393,-0.006076493,0.04162759,0.028496852,0.019163124,0.032354023,0.01033509,-0.010510111,0.04795878,-0.019621547,-0.01448338,-0.028591484,-0.034918055,-0.012503937,0.008687544,-0.019882783,-0.03474796,0.012485897,0.022275446,0.0031266068,0.01677047,-0.008738372,0.029459184,-0.026651094,-0.0030597881,0.02463499,-0.013406467,0.008560211,0.05310784,-0.036817882,0.0022051735,0.00126513,0.0011121632,0.006487419,0.0048115677,-0.07422153,-0.059677415,0.031897,0.016638763,0.009460373,-0.0059263604,0.026880575,0.08012875,-0.022035034,0.007651172,-0.018344201,0.02425662,0.030580232,0.0124626495,0.014649566,-0.011811959,-0.003743529,-0.034652013,0.013547063,0.045093082,-0.044713702,-0.021050142,0.021865973,-0.0057636206,-0.002697588,0.028135315,-0.015061415,0.040878676,0.013410577,0.030314595,0.023429826,-0.057324518,0.007614425,-0.012623904,-0.014374612,0.08657828,0.0060061626,0.025708431,-0.0045638643,0.047561828,0.0010772017,0.019818082,-0.058139272,0.018966945,0.007700726,-0.008042378,0.019742241,-0.040343646,-0.03863482,-0.007177209,-0.008088175,0.016135924,0.026613364,0.05348145,-0.029281102,0.055396456,0.01252083,0.04401878,-0.042928,-0.021564115,0.0059615616,0.017702725,-6.389719E-05,-0.0067889127,-0.0066735623,-0.0111992825,0.055610206,-0.011381676,0.019602299,-0.0085566975,0.011360381,0.052102678,-0.027621593,0.043076273,-0.016545188,0.07996389,0.01649732,0.018646598,0.021182198,-0.0034454565,-0.048032627,0.028519211,0.030103887,0.03444051,-0.01859897,0.041135117,0.02356275,0.019249424,-0.029806834,-0.024213102,-0.01450261,-0.05670206,0.005909707,-8.4382686E-05,-0.017491048,0.004443168,-0.0055449735,-0.025212185,0.016680585,0.0340147,-0.028337996,0.025811465,-0.003629682,-0.009360691,-0.04401039,0.042587258,0.0303183,-0.021956285,-0.0357265,0.011173995,-0.010254516,0.006562515,0.047323536,0.0051313145,0.02408204,0.052500736,-0.007698352,-0.014267197,0.009994386,-0.00090210134,0.009450576,0.025894588,0.016153187,0.026105927,-0.0067531387,0.039128553,0.0011576338,0.003396554,0.0122523075,0.0029000724,-0.0077896616,0.0013797041,-0.017602159,0.032190368,0.032403823,0.027698992,0.010365765,0.00397122,0.0036543114,-0.047993835,-0.0041806553,0.02840877,-0.010606021,0.057421297,-0.010726288,-0.032811426,-0.043472454,-0.028969476,0.027008152,0.027323343,0.0023127648,-0.042064574,0.047062542,0.006564437,0.020276342,-0.023780782,-0.013064838,0.031198237,-0.002636448,0.022096477,0.021265142,-0.08786343,-0.01896226,-0.009638261,-0.019554988,0.008514005,-0.011524235,-0.037609756,0.06944801,-0.02042268,0.02490204,0.0175033,0.008861625,-0.030909687,-0.025758948,0.040816296,-0.017204706,0.008457629,-0.01584058,-0.029748853,-0.008832903,0.019857867,-0.03300803,0.0077318684,0.014306269,-0.0058286125,0.019193567,-0.027031813,0.0004672337,-0.015492006,0.0015801608,-0.012749006,-0.019512108,-0.023771431,-0.011602292,0.017421018,0.0006052803,0.037458997,0.009147507,0.0123672765,0.04604487,0.025220662,-0.0327016,-0.021299604,0.0034487885,0.017320396,-0.03549542,0.015556673,0.017100781,-0.0556712,-0.023265192,0.008650329,-0.00058518193,-0.0637535,-0.032660082,-0.027911058,-0.030350283,0.030502455,0.027082328,-0.044545557,0.045208033,-0.047925483,-0.009224353,0.0027948266,-0.034761682,0.033903588,0.015100719,0.028636752,0.02602729,-0.016898531,-0.0005768403,-0.004772383,0.038588364,-0.01315473,0.024396215,0.04557798,-0.008914563,0.0373666,0.04323971,0.018246504,-0.00037602588,-0.01070531,-0.05234366,-0.017232908,0.016589722,0.024331441,0.037558965,0.02640446,-0.052880198,-0.018143892,0.0057470673,0.010794943,0.004118866,-0.02337834,0.004059485,0.017287482,0.0075546857,-0.035111878,-0.01779047,0.0592975,0.036391318,-0.025892865,0.03052311,-0.020345375,-0.026611598,-0.01093955,0.011074169,-0.0059134923,0.06796674,0.005636968,0.02658767,0.008272365,0.0044007325,-0.004990879,-0.007514307,0.03789502,0.03683091,0.020725911,-0.00016157511,-0.007818859,-0.03908957,-0.018135495,0.0059614154,-0.015362007,0.0053670397,-0.0834723,-0.03865946,-0.043199416,0.026133139,0.047120526,0.03856359,0.023695225,-0.0020464577,-0.07935789,0.019566268,0.027437355,-0.05454113,0.009301648,0.000808589,0.03526177,-0.012030744,0.004101625,-0.074963816,-0.02773087,-0.06326909,0.011587858,0.04554895,-0.011151459,-0.05136622,0.0066597033,-0.0042176615,-0.014872577,-0.025992777,-0.022057764,0.0299178,0.067901105,0.03198966,-0.010993083,-0.0035170005,-0.033117145,0.0022197831,0.019402046,0.03433894,-0.01652471,-0.014298654,-0.026101993,-0.026568526,0.041789405,0.030809805,0.005685081,0.005281114,-0.03253797,-0.015265503,-0.0102823395,0.0022692846,-0.03441939,0.006063726,-0.0031062,0.008898354,-0.026064856,0.006608487,0.016059875,0.025558677,-0.06836171,0.034571655,-0.017841475,-0.017082188,-0.0058363155,0.02870093,0.03212031,0.050269697,-0.013916842,-0.027722396,-0.053680155,-0.0061948122,0.016253857,-0.051339373,0.07479711,-0.02320939,-0.004352106,0.039072495,0.016529871,-0.039691206,0.009883239,-0.009614869,-0.021734478,0.0036247447,-0.042956345,0.025149537,0.0014010698,0.0195606,0.024363102,-0.03260154,0.03433004,0.02514961,-0.026438193,-0.03454895,-0.017366407,-0.03589111,-0.024191003,-0.020325946,0.02901503,-0.028029282,-0.0036475428,0.022737056,-0.026967391,-0.030014554,-0.01313328,-0.028432995,0.00033876323,0.029297765,-0.011010263,-0.04262318,-0.01783647,-0.08743146,-0.0026380725,-0.055794876,0.0036118678,-0.015338136,-0.0030496283,-0.060055412,-0.003920231,-0.018877089,0.027930556,-0.019453922,0.034413084,0.049273822,0.04805751,-0.014929307,-0.022374582,-0.025442386,0.028836709,-0.019530855,-0.041531485,-0.01266695,0.03103227,0.001643404,0.04127698,-0.042591978,0.001765156,-0.037188772,-0.00058013294,0.037801605,0.014359866,-0.014789293,-0.042523675,-0.0522052,0.016297866,0.003949639,0.0036718638,-0.077050835,0.0028949187,-0.008471739,0.013579623,-0.027650656,0.018587079,-0.038255867,-0.014024924,0.004859702,0.028444897,0.018351687,0.013036659,0.016772954,0.049278166,0.0011603598,0.012030677,-0.023824502,-0.031204043,-0.02370581,0.0119534815,-0.005929573,0.014437902,0.0061054355,-0.0019643886,-0.032393944,0.009978769,0.0047238735,0.0075994167,0.009097445,-0.016981838,0.018755956,0.020539809,0.020476306,0.006564443,0.03917903,0.014750061,0.00018613788,0.0033856442,-0.057803318,-0.013330247,-0.03295896,0.037586287,-0.025333678,-0.018011078,-0.033909705,0.011124452,0.04207882,0.014412105,0.021523291,0.051504,0.041683804,0.002002056,-0.034736373,0.009597866,0.047529556,0.010609544,0.014393679,-0.03202148,-0.012130065,0.0046263323,-0.0012055325,-0.06715266,-0.051310517,0.064712845,0.014960322,-0.0034820775,0.02896798,-0.022558428,-0.07466574,-0.033290442,0.053651758,-0.004985588,0.016444083,0.055876955,0.025488118,0.024914509,0.052078627,0.0027717547,0.022248367,-0.014162396,0.017646391,-0.02187669,-0.010010103,0.012363523,0.01331714,-0.0733834,-0.038629744,-0.022088494,0.0063084653,0.009425853,-0.018800141,-0.019174613,-0.084430255,-0.010722712,-0.01634239,0.0027685354,0.005357735,0.0016542325,-0.012097346,0.012754459,-0.05312204,0.019008204,0.025844922,-0.0025649376,0.01951427,-0.056200124,-0.020755965,-0.013231621,0.00941371,0.03235337,-0.0129020065,0.035466228,0.022760505,-0.00844464,0.043807264,-0.029693877,0.015932685,-0.012145694,-0.02866255,-0.05114875,-0.03399818,0.010919348,0.06416486,0.04369314,-0.010875109,-0.013505007,0.024116868,0.007838843,-0.006505009,-0.027159117,-0.014414387,-0.026546957,0.010710238,-0.015217061,-0.01986168,-0.020471012,-0.016114514,0.013075874,-0.012021333,0.023582876,-0.011392513,0.009069916,0.0039845468,-0.041412685,0.0059192027,-0.05855914,-0.041593518,-0.033606455,-0.022339808,0.03483941,0.02966761,-0.0053289738,-0.0083069755,0.009164463,0.063822545,-0.034217652,-0.008430893,0.016601773,0.024687666,-0.0066859336,0.017726459,0.0021847303,0.038282678,0.045534134,-0.017528184,-0.01457995,-0.05358669,-0.058107134,-0.007181181,0.00906404,0.007831611,0.007931179,-0.04342685,-0.011728905,0.032808322,-0.038857277,0.012551505,0.012800274,-0.010184139,-0.030399933,0.025200028,-0.0013314317,0.02333479,0.012828943,0.02609934,-0.0031891328,-0.0063400855,-0.015255868,0.0032994377,-0.011803471,0.017234718,0.03195265,-0.020823268,0.0397544,-0.006626762,-0.021258947,0.014176213,-0.052148186,0.0028035028,-0.01959634,-0.02116512,0.0023287036,0.054740727,0.035734333,-0.026055157,-0.013176712,-0.011251158,-0.048559416,-0.009501142,-0.05179603,-0.040805336,-0.028051807,-0.044958107,0.05540896,-0.007458332,0.022201039,0.0027609612,0.0065039787,-0.020223117,0.008966797,0.010712435,0.024326097,0.06556149,-0.057097174,0.019835174,0.057774294,0.011565021,-0.014312405,-0.04520066,-0.013586997,0.076688536,-0.007813617,0.004066071,-0.055105835,-0.02620114,-0.030466493,0.0626379,0.03464228,-0.017857375,-0.071242385,0.00889464,-0.05206675,0.019231535,-0.026479688,0.0014632684,0.023637336,-0.0030529564,-0.0008424849,0.046337288,0.03407289,-0.037745148,0.04742074,-0.008486629,0.012434304,-0.028569369,-0.018453117,0.030682568,0.052397378,0.030528696,0.061088618,0.0034867371,0.0014676382,0.012395496,-0.034087762,0.05290395,0.05421628,0.003854435,0.019412365,0.016309353,-0.0061656605,-0.008737604,-0.013899162,0.020253578,-0.010056686,-0.009548371,-0.030063968,-0.021026995,-0.005964697,0.020610698,-0.02911752,0.030129481,-0.020632962,-0.02409035,0.0204585,0.017788623,-0.058140296,0.012833571,-0.016276894,0.026636334,-0.03501842,0.028277084,0.016635727,0.052501813,0.013841767,0.0029653783,0.05745722,-0.024857782,-0.047740944,-0.006288673,-0.018472522,0.031299632,-0.0020361568,5.9437756E-05,0.020051407,-0.037510026,-0.028175015,-0.041976556,-0.040437035,-0.009919325,-0.035842698,0.0379674,0.0345837,-0.040362738,0.054002725,-0.012714509,0.026080694,0.009908203,0.06447275,0.0041133333,0.08010142,-0.00060145214,0.00029754345,-0.029001227,-0.041406263,-0.03808455,-0.00054499786,0.02428077,0.0040342472,-0.00020686227,0.0009589674,-0.06226692,-0.00075287995,0.0584082,-0.039195146,-0.033663135,0.020330662,-0.009383105,-0.035692066,-0.0015429315,0.012483914,-0.008091454,0.046020303,-0.03678104,-0.06296433,-0.01018623,0.005300339,-0.041635208,0.045030806,-0.052112974,-0.038173314,-0.039483897,-0.02681765,-0.032130696,-0.024425209,0.008374762,-0.020135425,0.0060490714,0.060379956,-0.009648638,0.046789944,-0.036625665,-0.005267898,0.03490719,0.060123656,-0.0067772833,0.02730299,0.0022467836,0.0265241,0.012288284,0.01005163,0.009737123,0.013430377,0.0039289594,0.04061797,0.0011091565,-0.022434626,-0.02583267,-0.07759998,0.015364323,-0.055140227,0.019021805,-0.028082965,-0.022513552,-0.06606982,0.012824798,-0.024683177,-0.013994526,0.009164191,-0.0052537736,-0.014911474,-0.043655165,0.22860631,0.038668744,0.06458397,0.04193011,0.05089679,0.032252003,-0.013951127,-0.022221422,0.009103075,-0.013204888,0.0025118918,-0.004009869,0.03188442,0.02930454,0.0039191293,0.052669775,-0.06289623,0.040255047,0.03579072,-0.0672426,-0.0383865,0.024827156,0.03736717,-0.0021150312,-0.023138197,0.032850865,-0.009845603,-0.033111855,-0.02147396,-0.018864669,0.01579414,-0.01415175,0.009624914,-0.0013739355,-0.015219939,0.0382169,0.04042278,0.010460159,0.012370107,-0.008214971,-0.00413986,0.0012935982,-0.016638037,0.010103103,0.028444577,0.0002820253,-0.0011055095,-0.038543303,0.082400285,-0.019104427,0.011726082,-0.013912183,0.011324724,0.01877103,-0.07928384,-0.017768463,-0.028878408,-0.021200914,-0.0060290215,-0.014132591,0.06339298,-0.016005162,-0.0049018986,-0.011386847,-0.049377847,0.04789158,-0.019307343,0.03786944,-0.045775775,-0.0193334,0.002360056,0.0033792453,0.002966418,0.002383197,0.03905174,0.051583093,-0.009415528,0.019782564,0.017086294,-0.019352956,-0.0071713366,-0.008401227,0.009727904,0.05364309,0.026089396,0.0046381624,-0.06440399,-0.010880023,-0.0052640038,0.008716808,0.0067838468,0.046574216,0.001999681,-0.020053048,0.016963046],"metadata":{"is_reference":false,"external_source_name":"","id":"_IrrationalEngine_IeCoreOpenTKOpengl_EngineWindow_OpenGlWindow.cs","description":"","text":"using IeCoreInterfaces;\nusing IeCoreInterfaces.EngineWindow;\nusing IeCoreInterfaces.Rendering;\nusing Microsoft.Extensions.Logging;\nusing OpenTK.Mathematics;\nusing OpenTK.Windowing.Common;\nusing OpenTK.Windowing.Desktop;\nusing System;\nusing System.Diagnostics;\n\nnamespace IeCoreOpenTKOpengl.EngineWindow\n{\n\tpublic class OpenGlWindow : IWindow\n\t{\n\t\tprivate readonly GameWindow _gameWindow; //TODO: Wrap this class with own class\n\t\tprivate readonly ISceneManager _sceneManager;\n\t\tprivate readonly IRenderer _renderer;\n\t\tprivate readonly ILogger\u003COpenGlWindow\u003E _logger;\n\n\t\tpublic event EventHandler LoadingComplete;\n\t\tpublic int UpdateRate { private get; set; } = 0;\n\t\tpublic int FrameRate { private get; set; } = 0;\n\n\t\tpublic double RenderFrameDeltaTime { get; private set; }\n\n\t\tpublic double UpdateDeltaTime { get; private set; }\n\n\t\tprivate readonly Stopwatch _renderFrameStopwatch = new Stopwatch();\n\n\t\tprivate readonly Stopwatch _updateStopwatch = new Stopwatch();\n\t\tpublic OpenGlWindow(int resX, int resY, IRenderer renderer, ISceneManager sceneManager, ILogger\u003COpenGlWindow\u003E logger)\n\t\t{\n\t\t\tGameWindowSettings gameWindowSettings = GameWindowSettings.Default;\n\t\t\tgameWindowSettings.IsMultiThreaded = false; //TODO: Investigate this option.\n\t\t\tgameWindowSettings.RenderFrequency = FrameRate;\n\t\t\tgameWindowSettings.UpdateFrequency = UpdateRate;\n\t\t\tNativeWindowSettings nativeWindowSettings = NativeWindowSettings.Default;\n\t\t\tnativeWindowSettings.APIVersion = new Version(3, 2);\n\t\t\tnativeWindowSettings.Size = new Vector2i(resX, resY);\n\t\t\tnativeWindowSettings.StartVisible = true;\n\t\t\tnativeWindowSettings.StartFocused = true;\n\t\t\t_gameWindow = new GameWindow(gameWindowSettings, nativeWindowSettings)\n\t\t\t{\n\t\t\t\tVSync = VSyncMode.Off\n\t\t\t};\n\n\t\t\t_logger = logger;\n\t\t\t_renderer = renderer;\n\t\t\t_sceneManager = sceneManager;\n\n\t\t\t_logger.LogDebug($\u0022VSync : {_gameWindow.VSync}\u0022);\n\t\t\t_logger.LogDebug($\u0022Window size : {_gameWindow.Size.X}x{_gameWindow.Size.Y}\u0022);\n\t\t\t_logger.LogDebug($\u0022Frame rate : {FrameRate}\u0022);\n\t\t\t_logger.LogDebug($\u0022Update rate : {UpdateRate}\u0022);\n\n\n\t\t\tAddListeners();\n\t\t}\n\n\t\t//TODO: investigate how to rewrite into observable. RX library\n\t\tprivate void AddListeners()\n\t\t{\n\t\t\t_gameWindow.Load \u002B= OnLoad;\n\t\t\t_gameWindow.Unload \u002B= OnUnload;\n\t\t\t_gameWindow.Resize \u002B= _ =\u003E { OnResized(); };\n\t\t\t_gameWindow.RenderFrame \u002B= OnRender;\n\t\t\t_gameWindow.UpdateFrame \u002B= OnUpdated;\n\t\t}\n\n\t\tprivate void RemoveListeners()\n\t\t{\n\t\t\t_gameWindow.Load -= () =\u003E { OnLoad(); };\n\t\t\t_gameWindow.Unload -= () =\u003E { OnUnload(); };\n\t\t\t_gameWindow.Resize -= _ =\u003E { OnResized(); };\n\t\t\t_gameWindow.RenderFrame -= args =\u003E { OnRender(args); };\n\t\t\t_gameWindow.UpdateFrame -= args =\u003E { OnUpdated(args); };\n\t\t}\n\t\tpublic void OnLoad()\n\t\t{\n\t\t\t_gameWindow.MakeCurrent();\n\t\t\t_sceneManager.OnLoad();\n\t\t\t_renderer.OnLoad();\n\t\t\t_renderer.SetViewPort(_gameWindow.ClientSize.X, _gameWindow.ClientSize.Y);\n\t\t\t_gameWindow.Title = _sceneManager.Scene.GetType().Name;\n\t\t\tLoadingComplete?.Invoke(this, null!);\n\t\t}\n\n\t\tprivate void OnRender(FrameEventArgs args)\n\t\t{\n\n\t\t\t_renderFrameStopwatch.Reset();\n\t\t\t_renderFrameStopwatch.Start();\n\t\t\t// args.Time;\n\t\t\t// _gameWindow.RenderTime;\n\t\t\tOnRender();\n\t\t\tRenderFrameDeltaTime = args.Time;\n\n\t\t}\n\t\tpublic void OnRender()\n\t\t{\n\t\t\t_renderer.OnRender();\n\t\t\t_gameWindow.SwapBuffers();\n\t\t\t//_logger.LogTrace($\u0022FPS {(1d / RenderFrameDeltaTime):0.}\u0022);\n\t\t\t_sceneManager.OnUpdated();\n\t\t\t_gameWindow.Title = $\u0022{_sceneManager.Scene.GetType().Name} FPS: {(1d / RenderFrameDeltaTime):0.}\u0022;\n\t\t}\n\n\t\tpublic void OnResized()\n\t\t{\n\t\t\t_logger.LogDebug($\u0022Resized to : {_gameWindow.Size.X}x{_gameWindow.Size.Y}\u0022);\n\t\t\t_renderer.SetViewPort(_gameWindow.Size.X, _gameWindow.Size.Y);\n\t\t\t_renderer.OnResized();\n\t\t}\n\n\t\tprivate void OnUpdated(FrameEventArgs args)\n\t\t{\n\t\t\tUpdateDeltaTime = args.Time;\n\t\t\tOnUpdated();\n\t\t\t_logger.LogTrace($\u0022UPS {(1d / UpdateDeltaTime):0.}\u0022);\n\t\t}\n\n\t\tpublic void OnUpdated()\n\t\t{\n\t\t\t_updateStopwatch.Reset();\n\t\t\t_updateStopwatch.Start();\n\n\t\t\t_renderer.OnUpdated();\n\t\t}\n\n\t\tpublic void Run()\n\t\t{\n\t\t\t_gameWindow.Run();\n\t\t}\n\n\t\tpublic void OnUnload()\n\t\t{\n\t\t\tRemoveListeners();\n\t\t\t_gameWindow.Dispose();\n\t\t}\n\n\n\t}\n}\n","additional_metadata":""},"key":"_IrrationalEngine_IeCoreOpenTKOpengl_EngineWindow_OpenGlWindow.cs","timestamp":null}